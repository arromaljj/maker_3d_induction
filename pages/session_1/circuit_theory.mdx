---
title: 'Circuit Theory for Tiny Arcade Game'
date: '2024-09-25'
---

import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'
import Image from 'next/image'

# Circuit Theory for Tiny Arcade Game

Understanding the theory behind our Tiny Arcade Game circuit is crucial for successful implementation and troubleshooting. In this section, we'll break down the circuit into its core components and explain how they work together.

## Circuit Overview

Our Tiny Arcade Game circuit consists of several key elements:

1. Power management (USB charging and battery)
2. ATtiny85 microcontroller
3. OLED display
4. Push buttons
5. Audio output (buzzer)
6. Supporting components (resistors, capacitors)

Let's examine each part of the circuit in detail.

## Power Management

<Image src="/images/power-management-circuit.svg" alt="Power Management Circuit" width={600} height={400} />

Our circuit uses a rechargeable battery with USB charging capability:

<Steps>
### USB Connector
A ZX62-B-5PA_33_ USB connector provides power input and potentially data connections.

### Charging IC
The TP4056 lithium-ion/polymer battery charging management IC handles the charging process.

### Battery Connection
A connector for a lithium polymer (LiPo) battery with positive (BAT+) and negative (BAT-) terminals.

### Power Switch
A switch in series with the battery's positive terminal serves as a power on/off switch.

### Indicator LEDs
Two LEDs indicate charging status (CHRG) and standby mode (STDBY).
</Steps>

<Callout type="info">
  This setup allows for both battery-powered operation and USB charging, making the device portable and convenient to use.
</Callout>

## ATtiny85 Microcontroller

<Image src="/images/attiny85-circuit.svg" alt="ATtiny85 Circuit" width={600} height={400} />

The ATtiny85 is the brain of our Tiny Arcade Game. Here's how it's connected:

1. **VCC (Pin 8)**: Connected to the power supply (battery/USB).
2. **GND (Pin 4)**: Connected to the circuit ground.
3. **PB0 (Pin 5)**: Connected to a push button (Up).
4. **PB1 (Pin 6)**: Connected to the audio buzzer.
5. **PB2 (Pin 7)**: Connected to a push button (Down).
6. **PB3 (Pin 2)**: Connected to the OLED display (SCL).
7. **PB4 (Pin 3)**: Connected to the OLED display (SDA).
8. **PB5 (Pin 1)**: Connected to a push button (Select).

<Callout type="warning">
  Ensure that you don't exceed the maximum current rating for each I/O pin (40mA) or the entire chip (200mA).
</Callout>

## Push Buttons

<Image src="/images/buttons-circuit.svg" alt="Push Buttons Circuit" width={600} height={400} />

We have three push buttons for user input:

1. Up Button (PB0):
   - Connected between PB0 and GND.
   - 1k立 pull-up resistor between PB0 and VCC.

2. Down Button (PB2):
   - Connected between PB2 and GND.
   - 1k立 pull-up resistor between PB2 and VCC.

3. Select Button (PB5):
   - Connected between PB5 and VCC.
   - 6.8k立 resistor between PB5 and GND.
   - Two 1k立 resistors in parallel between PB5 and VCC.

This configuration ensures reliable button presses and allows for multi-button functionality.

## OLED Display

<Image src="/images/oled-circuit.svg" alt="OLED Display Circuit" width={600} height={400} />

We're using an I2C OLED display. Here's how it's connected:

1. **VCC**: Connected to the power supply.
2. **GND**: Connected to the circuit ground.
3. **SCL**: Connected to PB3 of the ATtiny85.
4. **SDA**: Connected to PB4 of the ATtiny85.

The I2C protocol allows us to control the display using just two pins, saving valuable I/O on our microcontroller.

## Audio Output

<Image src="/images/audio-circuit.svg" alt="Audio Circuit" width={600} height={400} />

For sound effects and music, we're using a surface-mount piezo buzzer:

1. Model: SMT-0540-S-R
2. Connected to PB1 of the ATtiny85 and GND.

By rapidly switching the voltage on PB1, we can create different tones and sound effects.

## Component Interactions

Understanding how these components interact is key to grasping the overall circuit operation:

1. The ATtiny85 runs the game logic and controls all other components.
2. It sends data to the OLED display via I2C to update the game visuals.
3. It constantly checks the state of the push buttons to respond to user input.
4. Based on game events, it generates sounds using the piezo buzzer.
5. The power management circuit ensures stable power supply and allows for battery charging.

All of this is powered by the battery, with the option to charge via USB, and controlled by the power switch.

## Next Steps

Now that we understand the theory behind our circuit, we're ready to start implementing it in KiCad. In the next section, we'll begin by creating the schematic based on this circuit design.

Are you ready to bring this circuit to life in our schematic? Let's get started with KiCad!